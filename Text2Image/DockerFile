# 1. نستخدم صورة رسمية من بايثون مجهزة لذكاء اصطناعي
FROM pytorch/pytorch:2.1.0-cuda12.1-cudnn8-runtime

# 2. إعداد مجلد العمل داخل الحاوية
WORKDIR /app

# 3. نسخ ملفات المتطلبات (سنقوم بإنشائه بعد قليل)
COPY requirements.txt .

# 4. تثبيت المكتبات اللازمة
RUN pip install --no-cache-dir -r requirements.txt

# 5. نسخ باقي ملفات المشروع (الكود + الموديل المدرب)
COPY . .

# 6. فتح المنفذ الخاص بـ Gradio
EXPOSE 7860

# 7. أمر التشغيل الافتراضي (تشغيل واجهة الويب)
CMD ["python", "app.py"]